(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{2127:(e,t,s)=>{Promise.resolve().then(s.bind(s,7082))},2533:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3929).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},3728:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3929).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7082:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(3422),r=s(4398),n=s(953),i=s(7569),c=s(4756),l=s(2349),o=s(2745),d=s(3728),x=s(9675),h=s(2533),m=s(3929);let u=(0,m.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),v=(0,m.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var f=s(9442),g=s(3648),p=s(9183);function j(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,p.cn)("w-full caption-bottom text-sm",t),...s})})}function b(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,p.cn)("[&_tr]:border-b",t),...s})}function y(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,p.cn)("[&_tr:last-child]:border-0",t),...s})}function N(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,p.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function w(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,p.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function k(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,p.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}var _=s(8561),A=s(6545),F=s(3831),C=s(7916);let T={getPaginatedTransactions:async(e,t)=>{try{return await C.u.get("/api/transactions/paginated/".concat(e,"/").concat(t))}catch(e){throw console.error("Failed to fetch paginated transactions:",e),Error("Failed to fetch paginated transactions")}}};function E(){let[e,t]=(0,r.useState)(1),{data:s,isLoading:m,error:p,refetch:C}=(0,l.I)({queryKey:["transactions",e,20],queryFn:()=>T.getPaginatedTransactions(e,20),refetchOnWindowFocus:!1,retry:1,staleTime:3e4}),E=(null==s?void 0:s.transactions)||[],P=(null==s?void 0:s.total_pages)||0,S=(null==s?void 0:s.total)||0,z=e=>new Date(e).toLocaleString(),M=e=>"".concat(parseInt(e).toLocaleString()," msats"),$=e=>e.length<=20?e:"".concat(e.slice(0,10),"...").concat(e.slice(-10)),I=async e=>{try{await navigator.clipboard.writeText(e),F.oR.success("Token copied to clipboard!")}catch(e){console.error("Failed to copy to clipboard:",e),F.oR.error("Failed to copy token")}},q=e=>{e>=1&&e<=P&&t(e)};return(0,a.jsx)(A.Bc,{children:(0,a.jsxs)(n.SidebarProvider,{children:[(0,a.jsx)(i.AppSidebar,{variant:"inset"}),(0,a.jsxs)(n.SidebarInset,{children:[(0,a.jsx)(c.SiteHeader,{}),(0,a.jsx)("div",{className:"flex flex-1 flex-col",children:(0,a.jsxs)("div",{className:"@container/main flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Transaction History"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"View all Cashu token transactions processed by the system"})]}),(0,a.jsxs)(g.$,{onClick:()=>C(),variant:"outline",size:"sm",disabled:m,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 ".concat(m?"animate-spin":"")}),"Refresh"]})]}),m?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(o.E,{className:"h-[120px] w-full"},t))}):p?(0,a.jsxs)(f.Fc,{variant:"destructive",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)(f.TN,{children:["Failed to load transactions."," ",p instanceof Error?p.message:"Please check if the server is running and try refreshing the page."]})]}):0===E.length?(0,a.jsx)("div",{className:"py-8 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No transactions found."})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-muted-foreground text-sm",children:["Showing ",(e-1)*20+1," to"," ",Math.min(20*e,S)," of ",S," ","transactions"]}),(0,a.jsxs)("div",{className:"text-muted-foreground text-sm",children:["Page ",e," of ",P]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(j,{children:[(0,a.jsx)(b,{children:(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{className:"w-[100px]",children:"ID"}),(0,a.jsx)(w,{children:"Date & Time"}),(0,a.jsx)(w,{children:"Amount"}),(0,a.jsx)(w,{className:"w-[400px]",children:"Cashu Token"}),(0,a.jsx)(w,{className:"w-[60px]",children:"Actions"})]})}),(0,a.jsx)(y,{children:E.map(e=>(0,a.jsxs)(N,{children:[(0,a.jsx)(k,{className:"font-mono text-xs",children:e.id.slice(0,8)}),(0,a.jsx)(k,{children:(0,a.jsx)("div",{className:"text-sm",children:z(e.created_at)})}),(0,a.jsx)(k,{children:(0,a.jsx)(_.E,{variant:"secondary",children:M(e.amount)})}),(0,a.jsx)(k,{children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(A.m_,{children:[(0,a.jsx)(A.k$,{asChild:!0,children:(0,a.jsx)("p",{className:"max-w-[300px] cursor-pointer truncate rounded px-1 py-0.5 font-mono text-xs hover:bg-gray-100",children:$(e.token)})}),(0,a.jsx)(A.ZI,{className:"max-w-md break-all",children:(0,a.jsx)("p",{className:"font-mono text-xs",children:e.token})})]})})}),(0,a.jsx)(k,{children:(0,a.jsx)(g.$,{variant:"ghost",size:"sm",onClick:()=>I(e.token),className:"h-8 w-8 p-0",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})})]},e.id))})]})}),P>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-muted-foreground text-sm",children:["Page ",e," of ",P]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>{e>1&&t(e-1)},disabled:1===e,children:[(0,a.jsx)(u,{className:"mr-1 h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,P)},(t,s)=>{let r=e<=3?s+1:e>=P-2?P-4+s:e-2+s;return r<1||r>P?null:(0,a.jsx)(g.$,{variant:e===r?"default":"outline",size:"sm",onClick:()=>q(r),className:"h-9 w-9 p-0",children:r},r)})}),(0,a.jsxs)(g.$,{variant:"outline",size:"sm",onClick:()=>{e<P&&t(e+1)},disabled:e===P,children:["Next",(0,a.jsx)(v,{className:"ml-1 h-4 w-4"})]})]})]})]})]})})]})]})})}},8561:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var a=s(3422);s(4398);var r=s(4676),n=s(9183);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80",error:"border-transparent bg-red-500 text-white hover:bg-red-500/80"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},9442:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>c,TN:()=>l});var a=s(3422);s(4398);var r=s(4676),n=s(9183);let i=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:s}),t),...r})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[363,222,230,29,730,236,945,497,358],()=>t(2127)),_N_E=e.O()}]);