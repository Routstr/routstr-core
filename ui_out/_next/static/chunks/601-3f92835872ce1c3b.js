"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{2738:(e,t,i)=>{i.d(t,{BT:()=>l,Wu:()=>s,ZB:()=>d,Zp:()=>a,aR:()=>n,wL:()=>p});var r=i(3422);i(4398);var o=i(9183);function a(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...i})}function n(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...i})}function d(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",t),...i})}function l(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...i})}function s(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",t),...i})}function p(e){let{className:t,...i}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,o.cn)("flex items-center px-6 [.border-t]:pt-6",t),...i})}},3130:(e,t,i)=>{i.d(t,{J:()=>n});var r=i(3422);i(4398);var o=i(2996),a=i(9183);function n(e){let{className:t,...i}=e;return(0,r.jsx)(o.b,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...i})}},9119:(e,t,i)=>{i.d(t,{zQ:()=>l});var r=i(7916),o=i(9945);o.Ik({id:o.ai(),provider_type:o.Yj(),base_url:o.Yj(),api_key:o.Yj().optional(),api_version:o.Yj().nullable().optional(),enabled:o.zM(),provider_fee:o.ai().optional()}),o.Ik({provider_type:o.Yj(),base_url:o.Yj(),api_key:o.Yj(),api_version:o.Yj().nullable().optional(),enabled:o.zM().default(!0),provider_fee:o.ai().optional()}),o.Ik({provider_type:o.Yj().optional(),base_url:o.Yj().optional(),api_key:o.Yj().optional(),api_version:o.Yj().nullable().optional(),enabled:o.zM().optional(),provider_fee:o.ai().optional()});let a=o.Ik({prompt:o.ai().optional(),completion:o.ai().optional(),request:o.ai().optional(),image:o.ai().optional(),web_search:o.ai().optional(),internal_reasoning:o.ai().optional()}),n=o.Ik({modality:o.Yj().optional(),input_modalities:o.YO(o.Yj()).optional(),output_modalities:o.YO(o.Yj()).optional(),tokenizer:o.Yj().optional(),instruct_type:o.Yj().nullable().optional()}),d=o.Ik({id:o.Yj(),name:o.Yj(),description:o.Yj(),created:o.ai(),context_length:o.ai(),architecture:n.or(o.g1(o.bz())),pricing:a.or(o.g1(o.bz())),per_request_limits:o.g1(o.bz()).nullable().optional(),top_provider:o.g1(o.bz()).nullable().optional(),upstream_provider_id:o.ai().nullable().optional(),enabled:o.zM().default(!0)});o.Ik({provider:o.Ik({id:o.ai(),provider_type:o.Yj(),base_url:o.Yj()}),db_models:o.YO(d),remote_models:o.YO(d)});class l{static convertPricingToPerMillionTokens(e){if(!e)return e;let t={...e};return"number"==typeof t.prompt&&(t.prompt=1e6*t.prompt),"number"==typeof t.completion&&(t.completion=1e6*t.completion),"number"==typeof t.request&&(t.request=1e6*t.request),"number"==typeof t.image&&(t.image=1e6*t.image),t}static convertPricingToPerToken(e){if(!e)return e;let t={...e};return"number"==typeof t.prompt&&(t.prompt=t.prompt/1e6),"number"==typeof t.completion&&(t.completion=t.completion/1e6),"number"==typeof t.request&&(t.request=t.request/1e6),"number"==typeof t.image&&(t.image=t.image/1e6),t}static transformAdminModelToModel(e,t){var i,r;let o=this.convertPricingToPerMillionTokens(e.pricing),a=(null==o?void 0:o.prompt)||0,n=(null==o?void 0:o.completion)||0,d=(null==o?void 0:o.request)||0;return{id:e.id,name:e.name,full_name:e.name,description:e.description,modelType:(null==(i=e.architecture)?void 0:i.modality)||"text",isEnabled:e.enabled,createdAt:new Date(1e3*e.created).toISOString(),updatedAt:new Date(1e3*e.created).toISOString(),provider:t||"Unknown",url:"",api_key:void 0,input_cost:a,output_cost:n,min_cost_per_request:d,min_cash_per_request:0,contextLength:e.context_length,apiKeyRequired:!0,provider_id:null==(r=e.upstream_provider_id)?void 0:r.toString(),is_free:0===a&&0===n,soft_deleted:!e.enabled,has_own_api_key:!1,api_key_type:"group"}}static transformModelToAdminModel(e){let t=this.convertPricingToPerToken({prompt:e.input_cost,completion:e.output_cost,request:e.min_cost_per_request,image:0,web_search:0,internal_reasoning:0});return{id:e.id,name:e.name,description:e.description||"",created:Math.floor(new Date(e.createdAt).getTime()/1e3),context_length:e.contextLength||0,architecture:{modality:e.modelType,input_modalities:[e.modelType],output_modalities:[e.modelType],tokenizer:"",instruct_type:null},pricing:t,per_request_limits:null,top_provider:null,upstream_provider_id:e.provider_id?parseInt(e.provider_id):null,enabled:e.isEnabled}}static async getUpstreamProviders(){return await r.apiClient.get("/admin/api/upstream-providers")}static async getUpstreamProvider(e){return await r.apiClient.get("/admin/api/upstream-providers/".concat(e))}static async createUpstreamProvider(e){return await r.apiClient.post("/admin/api/upstream-providers",e)}static async updateUpstreamProvider(e,t){return await r.apiClient.patch("/admin/api/upstream-providers/".concat(e),t)}static async deleteUpstreamProvider(e){return await r.apiClient.delete("/admin/api/upstream-providers/".concat(e))}static async getProviderModels(e){return await r.apiClient.get("/admin/api/upstream-providers/".concat(e,"/models"))}static async createProviderModel(e,t){let i={...t,pricing:this.convertPricingToPerToken(t.pricing)};console.log("Creating provider model - pricing conversion:",{original:t.pricing,converted:i.pricing});let o=await r.apiClient.post("/admin/api/upstream-providers/".concat(e,"/models"),i);return{...o,pricing:this.convertPricingToPerMillionTokens(o.pricing)}}static async getProviderModel(e,t){let i=await r.apiClient.get("/admin/api/upstream-providers/".concat(e,"/models/").concat(encodeURIComponent(t)));return{...i,pricing:this.convertPricingToPerMillionTokens(i.pricing)}}static async getModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=await r.apiClient.post("/admin/api/models/get",{model_id:e,provider_id:t});return{...i,pricing:this.convertPricingToPerMillionTokens(i.pricing)}}static async updateProviderModel(e,t,i){let o={...i,pricing:this.convertPricingToPerToken(i.pricing)};console.log("Updating provider model - pricing conversion:",{original:i.pricing,converted:o.pricing});let a=await r.apiClient.patch("/admin/api/upstream-providers/".concat(e,"/models/").concat(encodeURIComponent(t)),o);return{...a,pricing:this.convertPricingToPerMillionTokens(a.pricing)}}static async deleteProviderModel(e,t){return await r.apiClient.delete("/admin/api/upstream-providers/".concat(e,"/models/").concat(encodeURIComponent(t)))}static async deleteAllProviderModels(e){return await r.apiClient.delete("/admin/api/upstream-providers/".concat(e,"/models"))}static async getModelsWithProviders(){let e=await this.getUpstreamProviders(),t=e.map(e=>({id:e.id.toString(),provider:e.provider_type,group_api_key:e.api_key,group_url:e.base_url,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),i=[],r=new Set;for(let t of e)try{let e=await this.getProviderModels(t.id);e.db_models.forEach(e=>{r.add(e.id);let o={...e,upstream_provider_id:t.id};i.push({...this.transformAdminModelToModel(o,t.provider_type),has_own_api_key:!1,api_key_type:"group"})}),e.remote_models.forEach(e=>{if(!r.has(e.id)){let r={...e,upstream_provider_id:t.id};i.push({...this.transformAdminModelToModel(r,t.provider_type),has_own_api_key:!1,api_key_type:"remote",soft_deleted:!1})}})}catch(e){console.error("Failed to fetch models for provider ".concat(t.id,":"),e)}return{models:i,groups:t}}static async createModelGroup(e){let t=await this.createUpstreamProvider({provider_type:e.provider,base_url:e.group_url||"",api_key:e.group_api_key||"",enabled:!0});return{id:t.id.toString(),provider:t.provider_type,group_api_key:t.api_key,group_url:t.base_url,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}static async updateModelGroup(e,t){let i=await this.updateUpstreamProvider(parseInt(e),{provider_type:t.provider,base_url:t.group_url,api_key:t.group_api_key});return{id:i.id.toString(),provider:i.provider_type,group_api_key:i.api_key,group_url:i.base_url,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}static async createModel(e){let t=e.provider_id?parseInt(e.provider_id):null,i={prompt:e.input_cost/1e6,completion:e.output_cost/1e6,request:e.min_cost_per_request||0,image:0,web_search:0,internal_reasoning:0},o={model_id:e.id||e.full_name,provider_id:t,name:e.name||e.full_name,description:e.description||"",created:Math.floor(Date.now()/1e3),context_length:e.contextLength||0,architecture:{modality:e.modelType||"text",input_modalities:[e.modelType||"text"],output_modalities:[e.modelType||"text"],tokenizer:"",instruct_type:null},pricing:this.convertPricingToPerToken(i),per_request_limits:null,top_provider:null,enabled:!1!==e.isEnabled},a=await r.apiClient.post("/admin/api/models/create",o);return this.transformAdminModelToModel({...a,pricing:this.convertPricingToPerMillionTokens(a.pricing)},e.provider)}static async updateModel(e,t){let i=t.provider_id?parseInt(t.provider_id):null,o=await this.getModel(e,i),a={prompt:t.input_cost/1e6,completion:t.output_cost/1e6,request:t.min_cost_per_request||0,image:0,web_search:0,internal_reasoning:0},n={...o,model_id:e,provider_id:i,pricing:a};t.name&&(n.name=t.name),t.description&&(n.description=t.description),void 0!==t.contextLength&&(n.context_length=t.contextLength),void 0!==t.isEnabled&&(n.enabled=t.isEnabled);let d=await r.apiClient.post("/admin/api/models/update",{...n,pricing:this.convertPricingToPerToken(n.pricing)});return this.transformAdminModelToModel({...d,pricing:this.convertPricingToPerMillionTokens(d.pricing)},t.provider)}static async deleteModel(e,t){let i=t?parseInt(t):null;return await r.apiClient.post("/admin/api/models/delete",{model_id:e,provider_id:i}),{message:"Model deleted successfully"}}static async softDeleteModel(e,t){let i=t?parseInt(t):null,o=await this.getModel(e,i);return await r.apiClient.post("/admin/api/models/update",{model_id:e,provider_id:i,...o,enabled:!1,pricing:this.convertPricingToPerToken(o.pricing)}),{message:"Model soft deleted successfully"}}static async deleteModels(e,t){if(!t)throw Error("provider_id is required to delete models");let i=parseInt(t);for(let t of e)await this.deleteProviderModel(i,t);return{deleted_count:e.length,message:"Models deleted successfully"}}static async softDeleteModels(e,t){if(!t)throw Error("provider_id is required to soft delete models");let i=parseInt(t);for(let t of e){let e=await this.getProviderModel(i,t);await this.updateProviderModel(i,t,{...e,enabled:!1})}return{deleted_count:e.length,message:"Models soft deleted successfully"}}static async bulkUpdateModels(e,t,i){if(!i)throw Error("provider_id is required for bulk updates");let r=[],o=0,a=parseInt(i);for(let i of(console.log("Bulk update not implemented, ignoring updates:",t),e))try{let e=await this.getProviderModel(a,i);await this.updateProviderModel(a,i,e),o++}catch(t){let e=t instanceof Error?t.message:"Unknown error";r.push("Failed to update ".concat(i,": ").concat(e))}return{updated_count:o,total_count:e.length,message:"Bulk update completed",errors:r}}static async deleteAllModels(){let e=await this.getUpstreamProviders(),t=0;for(let i of e)t+=(await this.deleteAllProviderModels(i.id)).deleted;return{deleted_count:t,message:"All models deleted successfully"}}static async deleteModelsByProvider(e){return{deleted_count:(await this.deleteAllProviderModels(parseInt(e))).deleted,message:"Provider models deleted successfully"}}static async restoreModels(e,t){if(!t)throw Error("provider_id is required to restore models");let i=parseInt(t);for(let t of e){let e=await this.getProviderModel(i,t);await this.updateProviderModel(i,t,{...e,enabled:!0})}return{restored_count:e.length,message:"Models restored successfully"}}static async refreshAllModels(){return{message:"Refresh not implemented for admin API"}}static async refreshModels(e){return console.log("Refresh models not implemented for admin API, ignoring data:",e),{message:"Refresh not implemented for admin API"}}static async getOpenRouterPresets(){return(await r.apiClient.get("/admin/api/openrouter-presets")).map(e=>({...e,pricing:this.convertPricingToPerMillionTokens(e.pricing)}))}static async getSettings(){return await r.apiClient.get("/admin/api/settings")}static async updateSettings(e){return await r.apiClient.patch("/admin/api/settings",e)}static async login(e){return await r.apiClient.post("/admin/api/login",{password:e})}static async logout(){return await r.apiClient.post("/admin/api/logout",{})}static async getTemporaryBalances(){return await r.apiClient.get("/admin/api/temporary-balances")}}o.Ik({hashed_key:o.Yj(),balance:o.ai(),total_spent:o.ai(),total_requests:o.ai(),refund_address:o.Yj().nullable(),key_expiry_time:o.ai().nullable()})}}]);